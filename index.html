<!doctype html>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="./css/styles.css">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>


<body>
  <div class="container">
    <div class="left-column">
      <div class="goblin">
      </div>
    </div>
    <div class="verses">
      <div>

        <div class="verse one" id="one">
          <p> Morning and evening </p>
          <p> Maids heard the goblins cry: </p>
        </div>

        <div class="verse two" id="two">
          <p> “Come buy our orchard fruits, </p>
          <p> Come buy, come buy: </p>
        </div>

        <div class="verse three" id="three">
          <p> Apples and quinces, </p>
          <p> Lemons and oranges, </p>
        </div>

        <div class="verse four" id="four">
          <p> Plump unpeck’d cherries, </p>
          <p> Melons and raspberries, </p>
          <p> Bloom-down-cheek’d peaches, </p>
        </div>

        <div class="verse five" id="five">
          <p> Swart-headed mulberries, </p>
          <p> Wild free-born cranberries, </p>
          <p> Crab-apples, dewberries, </p>
          <p> Pine-apples, blackberries, </p>
          <p> Apricots, strawberries;— </p>
        </div>

        <div class="verse six" id="six">
          <p> All ripe together </p>
          <p> In summer weather,— </p>
          <p> Morns that pass by, </p>
          <p> Fair eves that fly; </p>
        </div>

        <div class="verse seven" id="seven">
          <p> Come buy, come buy: </p>
          <p> Our grapes fresh from the vine, </p>
          <p> Pomegranates full and fine, </p>
          <p> Dates and sharp bullaces, </p>
          <p> Rare pears and greengages, </p>
          <p> Damsons and bilberries, </p>
        </div>

        <div class="verse eight" id="eight">
          <p> Taste them and try: </p>
          <p> Currants and gooseberries, </p>
          <p> Bright-fire-like barberries, </p>
          <p> Figs to fill your mouth, </p>
          <p> Citrons from the South, </p>
          <p> Sweet to tongue and sound to eye; </p>
          <p> Come buy, come buy.” </p>
        </div>

        <div class="end" id="end">
        </div>

      </div>
    </div>

    <div class="right-column">

    </div>
  </div>
</body>

<script>

  const one = document.getElementById('one');
  const two = document.getElementById('two');
  const three = document.getElementById('three');
  const four = document.getElementById('four');
  const end = document.getElementById('end');

  const fadeOutPoint = $(window).height() / 6;
  const bg = '#F2DEBD';
  const fontColor = '#386F63';

  function fadeOutText(element) {
    element.style.color = bg;
  }

  function fadeInText(element) {
    element.style.color = fontColor;
  }

  function hideElement(element) {
    element.style.height = '0px';
  }

  function setBottomMargin(element, newMargin) {
    element.style.marginBottom = newMargin;
  }

  $(window).scroll(function() {

    // as soon as the user starts scrolling,
    // fade out verse one and bring the next
    // verse up
    if (one.getBoundingClientRect().top < fadeOutPoint) {
      fadeOutText(one);
      setBottomMargin(one, '0px');

    } else {
      fadeInText(one);
      setBottomMargin(one, '100vh');
      fadeOutText(two);
    }

    // only once the second verse has made its
    // way to the top, show the third verse
    if (two.getBoundingClientRect().top < fadeOutPoint) {
      fadeOutText(two);
      setBottomMargin(two, '0px');
    } else {
      fadeInText(two);
      setBottomMargin(two, '100vh');
      fadeOutText(three);
    }

    // same with the third and fourth verses
    if (three.getBoundingClientRect().top < fadeOutPoint) {
      fadeOutText(three);
      setBottomMargin(three, '0px');
    } else {
      fadeInText(three);
      setBottomMargin(three, '100vh');
      fadeOutText(four);
    }

    if (four.getBoundingClientRect().top < fadeOutPoint) {
      fadeOutText(four);
      setBottomMargin(four, '0px');
    } else {
      fadeInText(four);
      setBottomMargin(four, '100vh');
    }

    if (five.getBoundingClientRect().top < fadeOutPoint) {
      fadeOutText(five);
      setBottomMargin(five, '0px');
    } else {
      fadeInText(five);
      setBottomMargin(five, '100vh');
    }


    // var offset = $('#two').offset().top;
    // var scrollTop = $(window).scrollTop();
    // var distance = offset - scrollTop;
    //
    // console.log('distance');
    // console.log(distance);
    //
    // console.log('client height');
    // console.log(two.clientHeight);
    // if (distance <= (two.clientHeight / 2)) {
    //   one.style.color = bg;
    //   two.style.color = fontColor;
    // } else {
    //   one.style.color = fontColor;
    //   two.style.color = bg;
    // }
    //
    // if (distance <= 25) {
    //   two.style.color = bg;
    //   var offset = $('#three').offset().top;
    //   var scrollTop = $(window).scrollTop();
    //   var distance = offset - scrollTop;
    //
    //   if (distance <= (two.clientHeight / 2)) {
    //     two.style.color = '#F2DEBD';
    //     three.style.color = '#386F63';
    //   } else {
    //     two.style.color = '#386F63';
    //     three.style.color = '#F2DEBD';
    //   }
    //
    //   if (distance <= 25) {
    //     three.style.color = '#F2DEBD';
    //   }
    // }



  })

</script>


</html>
